<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('Registrar devolución')}"></head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>
<div class="container">
    <div class="card">
        <h2 th:text="'Devolución para ' + ${customer.name}">Devolución</h2>
        <form th:object="${refundForm}"
              th:action="@{'/customers/' + ${customer.id} + '/refunds'}"
              method="post"
              data-disable-on-submit="true">
            <label>Monto</label>
            <input type="text" inputmode="numeric" data-money-input="true" th:field="*{amount}" data-testid="refund-amount">
            <div th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}"></div>
            <p class="future-balance"
               data-balance-preview
               data-balance-mode="decrease"
               th:attr="data-balance-current=${customer.debt}"
               th:text="'Saldo luego de registrar: ' + ${T(cl.casero.migration.util.CurrencyUtil).format(customer.debt)}">
                Saldo luego de registrar: $0
            </p>

            <label>Fecha</label>
            <input type="date" th:field="*{date}" th:value="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}" data-testid="refund-date">
            <div th:if="${#fields.hasErrors('date')}" th:errors="*{date}"></div>

            <label>Detalle</label>
            <input type="text" th:field="*{detail}" data-testid="refund-detail">
            <div th:if="${#fields.hasErrors('detail')}" th:errors="*{detail}"></div>

            <button type="submit" data-loading-text="Registrando devolución..." data-testid="refund-submit">Registrar devolución</button>
        </form>
    </div>
</div>
</body>
</html>
